# 需求文档：Markdown 转思维导图工具 (MDtoXMind)

## 1. 项目概述
本项目旨在开发一款运行在 macOS 系统上的桌面应用程序，能够将 Markdown 格式的文本或文件转换为通用的思维导图格式（主要是 XMind 格式）。软件需保持简洁易用，并兼顾 Windows 系统的兼容性（根据用户全局规则）。

## 2. 用户角色
- **普通用户**: 需要将笔记、大纲等 Markdown 内容快速转换为思维导图进行展示或进一步编辑的人群。

## 3. 功能需求

### 3.1 输入功能
- **文件导入**: 支持拖拽 `.md` 文件到应用窗口进行打开。
- **文本粘贴**: 提供文本编辑区域，允许用户直接粘贴 Markdown 文本。
- **格式支持**:
    - 识别 Markdown 标题 (`#`, `##`, `###`...) 作为思维导图的层级节点。
    - 识别无序列表 (`-`, `*`) 和有序列表 (`1.`) 作为子节点。
    - **图片支持**: 识别 Markdown 图片语法 `![alt](url)`，将其转换为思维导图节点的图片附件。
    - **备注支持**: 识别标题下方的正文文本（非标题、非列表行），将其转换为对应节点的“备注”信息。

### 3.2 转换与处理
- **实时解析**: 输入 Markdown 后，软件应能解析层级结构。
- **结构映射**:
    - H1 -> 中心主题 (Central Topic)
    - H2 -> 主要主题 (Main Topic)
    - H3-H6 / List -> 子主题 (Subtopic)
    - 正文文本 -> 节点备注 (Note)
    - 图片链接 -> 节点图片 (Image)

### 3.3 预览功能
- **可视化预览**: 在软件界面内提供思维导图的简易预览（非必须完全复刻 XMind 渲染，但需展示结构）。
- **双向同步 (进阶)**: 修改 Markdown 文本，预览实时更新。

### 3.4 导出功能
- **XMind 格式**: 核心需求。生成的 `.xmind` 文件需兼容 **XMind ZEN (新版)** 格式。
- **其他格式 (可选)**:
    - OPML (.opml): 通用大纲格式，兼容性好。
    - 图片 (.png/.jpg): 快速分享。
    - Freemind (.mm): 开源格式。

## 4. 非功能需求 (NFR)

### 4.1 平台兼容性
- **macOS**: 首选目标平台，需适配 macOS 外观（如圆角、菜单栏）。
- **Windows**: 根据用户规则，代码架构需考虑 Windows 兼容性（推荐使用 Electron 或 Tauri 等跨平台技术栈）。

### 4.2 性能
- **响应速度**: 解析和转换应在毫秒级完成，无明显卡顿。
- **文件大小**: 生成的 XMind 文件应尽可能精简。

### 4.3 安全性
- **本地处理**: 所有数据转换均在本地完成，不上传服务器，保护用户隐私。

### 4.4 易用性
- **界面简洁**: 采用左侧编辑/输入，右侧预览，顶部/底部工具栏的经典布局。
- **快捷键**: 支持常见的 macOS 快捷键（如 Cmd+S 保存）。

### 4.5 部署与运维 (新增)
- **免维护**: 交付物应为编译打包好的独立应用程序，无需用户配置开发环境。
- **全图形化**: 启动和所有操作均通过 GUI 完成，严禁依赖命令行。

## 5. 技术栈建议
鉴于“macOS 运行且保持 Windows 兼容性”以及“免维护、全图形化”的要求，推荐以下方案：
- **核心框架**: **Electron**
    - *理由*: 技术成熟，打包工具链 (`electron-builder`) 完善，能轻松生成 macOS (.dmg/.app) 和 Windows (.exe) 的独立安装包，确保“开箱即用”。
- **前端技术**: React + TailwindCSS (保证美观与开发效率)。
- **Markdown 解析**: `remark` + `remark-gfm` (支持 GitHub 风格 Markdown)。
- **XMind 生成**: `xmind-generator` 或自行构建 ZIP 包 (针对 XMind ZEN 优化)。
- **打包工具**: `electron-builder` (自动处理图标、签名、多平台构建)。

## 6. 变更记录
- **2025-11-20**: 
    - 确认支持 Markdown 图片转节点图片。
    - 确认支持正文转节点备注。
    - 确认目标格式为 XMind ZEN。

---
**文档状态**: 已确认
**最后更新**: 2025-11-20
